<dom-module id="bss-login">
    <template>

        <style>

        </style>

        <h3>login</h3>

        <firebase-auth id="authElement" user="{{user}}"
                       status-known="{{statusKnown}}" provider="google">
        </firebase-auth>


        <paper-button class="signInButton" raised on-tap="signin" hidden$="[[user]]"><img src="images/google.svg">Sign In
        </paper-button>
        <paper-button id="signout" raised on-tap="signout" hidden$="[[!user]]">Sign Out</paper-button>

    </template>

</dom-module>

<script>

    class BssLogin extends Polymer.Element {
        static get is() {
            return 'bss-login';
        }

        static get config() {
            return {
                properties: {

                }
            };
        }
        signin() {
            return this.$.authElement.signInWithPopup();
        }

        connectedCallback() {
            super.connectedCallback();
            requestAnimationFrame(this._installListeners.bind(this));
        }

        _installListeners() {
            this.$.authElement.auth
                .onAuthStateChanged(this._authStateChanged.bind(this));

            window.addEventListener('signout', this._onSignout.bind(this));
        }

        _authStateChanged() {
            this.$.authElement.fire('auth-changed', {
                user: this.user
            });
        }


        _onSignout() {
            return this.$.authElement.signOut();
        }

        signout() {
            this.$.signout.fire('signout');
        }


    }
    customElements.define(BssLogin.is, BssLogin);



</script>




